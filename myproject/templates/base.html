{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}?v=1.6" />
    {% block styles %} {% endblock %}
  </head>
  <body>
    <header>
      <nav>
        <ul id="nav-links"></ul>
      </nav>
    </header>

    <!-- Content (тіло сторінки) -->
    <main>{% block content %}{% endblock %}</main>

    <footer>
      <p><strong>&copy; 2025 RentalUA</strong></p>
    </footer>

    <script>
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(";").shift();
      }

      function updateNavigation() {
        const token = getCookie("is_logged_in");
        const navLinks = document.getElementById("nav-links");

        console.log(getCookie());
        {% comment %} if (token) {
          navLinks.innerHTML = `
            <li><a href="/">Home</a></li>
            <li><a href="/profile">Profile</a></li>
            {% if current_user.is_admin %}
              <li><a href="/admin/">Admin panel</a></li>
            {% endif %}
          `;
        } 
        else {
          navLinks.innerHTML = `
            <li><a href="/">Home</a></li>
            <li><a href="/register">Register</a></li>
            <li><a href="/login">Login</a></li>
          `;
        } {% endcomment %}

        navLinks.innerHTML = `
        <li><a href="/">Home</a></li>
        <li><a href="/register">Register</a></li>
        <li><a href="/login">Login</a></li>
        <li><a href="/profile">Profile</a></li>
        <li><a href="/admin-panel/">Admin panel</a></li>
      `;

      }

      // Оновлення навігації при завантаженні сторінки
      updateNavigation();
    </script>
  </body>
</html>
